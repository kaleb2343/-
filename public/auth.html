<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <link rel="stylesheet" href="auth.css">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <!-- Firebase Client SDK Initialization Script -->
    <!-- This MUST be placed before auth.js or any script that uses window.auth -->
    <script type="module">
      // Import the necessary Firebase client SDK modules
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-app.js";
      import { getAuth, signInWithCustomToken, createUserWithEmailAndPassword, updateProfile, signOut } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-auth.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.0.0/firebase-analytics.js"; // Include if you want analytics

      // Your web app's Firebase configuration (same as used in index.html)
      const firebaseConfig = {
        apiKey: "AIzaSyCkF55VhbjlHSffkX5K40mazQxpfWZFl-0",
        authDomain: "my-merafe-books.firebaseapp.com",
        projectId: "my-merafe-books",
        storageBucket: "my-merafe-books.firebasestorage.app",
        messagingSenderId: "969903456042",
        appId: "1:969903456042:web:5205e9cdd09d9acdb66853",
        measurementId: "G-YR97H63305" // Optional, if you're using Analytics
      };

      // Initialize Firebase app
      const app = initializeApp(firebaseConfig);

      // Initialize Analytics (optional)
      const analytics = getAnalytics(app); 

      // Get the Auth service and make it globally accessible for your JS files
      window.auth = getAuth(app);
      window.signOutFirebase = signOut; // Make signOut available globally for logout logic
      console.log("Firebase client-side SDK initialized and auth object available.");
    </script>

  </head>
  <body>
    <div class="relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden">
      <div class="layout-container flex h-full grow flex-col">
        <header class="flex items-center justify-between whitespace-nowrap px-10 py-3">
          <div class="flex items-center gap-8">
            <div class="flex items-center gap-4 text-[#141414]">
              <div class="size-6">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open">
                  <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2V3z"></path>
                  <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7V3z"></path>
                </svg>
              </div>
              <h1 class="text-2xl font-bold">·àù·ä•·à´·çç</h1>
            </div>
          </div>
          <div class="flex items-center gap-4">
            <!-- Theme Toggle -->
            <div id="theme-toggle" class="size-6 cursor-pointer">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sun">
                <circle cx="12" cy="12" r="4"></circle>
                <path d="M12 2v2"></path>
                <path d="M12 20v2"></path>
                <path d="M4.93 4.93l1.41 1.41"></path>
                <path d="M17.66 17.66l1.41 1.41"></path>
                <path d="M2 12h2"></path>
                <path d="M20 12h2"></path>
                <path d="M4.93 19.07l1.41-1.41"></path>
                <path d="M17.66 6.34l1.41-1.41"></path>
              </svg>
            </div>
          </div>
        </header>

        <main class="flex flex-col items-center justify-center min-h-[calc(100vh-120px)] p-5">
          <div class="auth-form-card bg-white p-8 rounded-lg shadow-md w-full max-w-md">
            <h2 id="auth-mode-title" class="auth-mode-title text-3xl font-bold text-center text-[#141414] mb-8">Login</h2>
            <p id="auth-message" class="text-center text-red-500 mb-4"></p> <!-- Message display area -->
            <form id="auth-form" class="space-y-6">
              <div class="relative">
                <span class="input-icon absolute inset-y-0 left-0 flex items-center pl-3">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-mail">
                    <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                    <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
                  </svg>
                </span>
                <input type="email" id="auth-email" class="form-input w-full p-4 auth-input pl-10" placeholder="Email" required>
              </div>
              <div class="relative">
                <span class="input-icon absolute inset-y-0 left-0 flex items-center pl-3">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-lock">
                    <rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                  </svg>
                </span>
                <input type="password" id="auth-password" class="form-input w-full p-4 auth-input pl-10" placeholder="Password" required>
              </div>
              <div id="display-name-field" class="mb-6 hidden relative">
                <span class="input-icon absolute inset-y-0 left-0 flex items-center pl-3">üë§</span>
                <input type="text" id="auth-display-name" class="form-input w-full p-4 auth-input pl-10" placeholder="Display Name (for author name)">
              </div>
              <button type="submit" id="auth-button" class="w-full auth-button py-4">
                Login
              </button>
            </form>

            <button id="toggle-auth-mode" class="mt-8 toggle-button text-[#141414] hover:text-[#252525]">
              No account? Sign up
            </button>

          </div>
        </main>

        <footer class="flex justify-center py-5">
          <div class="flex flex-wrap items-center justify-center gap-4 text-[#757575] text-base font-normal leading-normal">
            <a href="privacy and policy.html">About Us</a>
            <a href="privacy and policy.html">Privacy Policy</a>
            <a href="privacy and policy.html">Terms of Service</a>
            <span class="mx-2">|</span>
            <span>&copy; 2024 Merafe. All rights reserved.</span>
          </div>
        </footer>
      </div>
    </div>
    <script src="auth.js"></script>
  </body>
</html>
